\section{Đặc tả ca sử dụng}

Trong phần này, những ca sử dụng được nhắc tới trong biểu đồ
ca sử dụng sẽ được mô tả chi tiết thông qua các đặc tả ca sử dụng
(use case specification).


\subsection{Phát bài hát}
Ca sử dụng phát bài hát là trọng tâm của một ứng dụng nghe 
nhạc. Chúng tôi đã phân tích và giải thích chi tiết trong 
đặc tả ca sử dụng dưới đây.


\begin{longtable}{|p{4.5cm}|p{10cm}|}
	\hline
	\textbf{Mã Use case} & UC-PlaySong \\
	\hline
	\textbf{Tên Use case} & Playing a song \\
	\hline
	\textbf{Tác nhân} & Người dùng \\
	\hline
	\textbf{Mô tả} & Người dùng bấm vào một bản nhạc trên màn hình chính để phát bản nhạc đó. \\
	\hline
	\textbf{Sự kiện kích hoạt} & Người dùng bấm vào bản nhạc \\
	\hline
	\textbf{Pre-condition} &
	\begin{itemize}
		\item Người dùng đã đăng nhập vào app và hình ảnh các bản nhạc đã được load trên màn hình chính.
		\item Kết nối internet ổn định.
	\end{itemize}
	\\
	\hline
	\textbf{Basic flow} &
	\begin{tabular}{|p{1cm}|p{7.5cm}|}
		\hline
		\textbf{STT} & \textbf{Sự kiện} \\
		\hline
		1 & Người dùng bấm vào hình bản nhạc trên màn hình chính \\
		\hline
		2 & Client (mobile app) gửi ID bản nhạc người dùng bấm vào về API Gateway của Server \\
		\hline
		3 & API Gateway gửi ID bản nhạc tới Track Service \\
		\hline
		4 & Track Service tìm trong cơ sở dữ liệu và trả về Storage Key của bản nhạc trên Amazon Cloud \\
		\hline
		5 & Client gọi Playing Service với Key để lấy link bản nhạc qua API Gateway \\
		\hline
		6 & Client load giao diện phát nhạc cho người dùng \\
		\hline
	\end{tabular}
	\\
	\hline
	\textbf{Alternate flow:} Client thoát giao diện phát nhạc &
	\begin{tabular}{|p{1cm}|p{7.5cm}|}
		\hline
		\textbf{STT} & \textbf{Sự kiện} \\
		\hline
		6.1.1 & Client thoát giao diện phát nhạc về home của ứng dụng \\
		\hline
		6.1.2 & Khi người dùng vào lại, Client hiện thanh điều khiển nhạc ở dưới cùng màn hình \\
		\hline
	\end{tabular}
	\\
	\hline
	\textbf{Post-condition} & Bản nhạc được phát và người dùng có thể điều khiển được bản nhạc \\
	\hline
	\textbf{Other} & Bản nhạc hiện trên màn hình chính được đảm bảo có trong database và được upload lên Object Storage Bucket \\
	\hline
	\caption{Use Case: Playing a song} \label{tab:usecase-playingsong} \\
\end{longtable}



\subsection{Đăng ký}
\begin{longtable}{|p{4.5cm}|p{10cm}|}
	\hline
	\textbf{Mã Use case} & UC-Register \\
	\hline
	\textbf{Tên Use case} & Đăng ký\\
	\hline
	\textbf{Tác nhân} & Người dùng\\
	\hline
	\textbf{Mô tả} & Người dùng tạo đăng ký để tạo tài khoản\\
	\hline
	\textbf{Điều kiện kích hoạt} & Người dùng bấm vào nút "Sign up free"\\
	\hline
	\textbf{Pre-condition} &
	\begin{itemize}
		\item Giao diện đăng ký được hiển thị.
		\item Kết nối internet ổn định.
	\end{itemize}
	\\
	\hline
	\textbf{Basic flow} &
	\begin{tabular}{|p{1cm}|p{7.5cm}|}
		\hline
		\textbf{STT} & \textbf{Sự kiện} \\
		\hline
		1 & Người dùng nhập email, password, confirmPassword, firstName, lastName vào form đăng ký \\
		\hline
		2 & Hệ thống kiểm tra định dạng và tính hợp lệ của các trường\\
		\hline
		3 & Nếu hợp lệ, hệ thống gửi thông tin đến server\\
		\hline
		4 & Server lưu thông tin và phản hồi kết quả \\
		\hline
		5 & Hệ thống thông báo đăng ký thành công và chuyển đến giao diện đăng nhập \\
		\hline
	\end{tabular}
	\\
	\hline
	\textbf{Alternate flow:} Các thao tác thay thế trong quá trình đăng ký &
	\begin{tabular}{|p{1cm}|p{7.5cm}|}
		\hline
		\textbf{STT} & \textbf{Sự kiện} \\
		\hline
		5.1.1 & Người dùng nhấn “Hiện mật khẩu” để hiển thị rõ password và confirm password \\
		\hline
		5.1.2 & Người dùng nhấn “Quay lại” để quay lại giao diện bắt đầu \\
		\hline
	\end{tabular}
	\\
	\hline
	\textbf{Post-condition} & Người dùng có thể đăng nhập bằng thông tin vừa đăng ký \\
	\hline
	\textbf{Other} &
	\begin{itemize}
		\item Email đăng ký được đảm bảo đúng dịnh dạng và chưa từng được đăng ký trước đây.
		\item Thông tin yêu cầu được điền đầy đủ.
	\end{itemize}
	\\
	\hline
	\caption{Use Case: Đăng ký} \label{tab:usecase-dangky} \\
\end{longtable}

\subsection{Đăng nhập}
\begin{longtable}{|p{4.5cm}|p{10cm}|}
	\hline
	\textbf{Mã Use case} & UC-Login \\
	\hline
	\textbf{Tên Use case} & Login \\
	\hline
	\textbf{Tác nhân} & Người dùng \\
	\hline
	\textbf{Mô tả} & Người dùng đăng nhập để sử dụng hệ thống. \\
	\hline
	\textbf{Sự kiện kích hoạt} & Người dùng bấm vào nút "Log in" \\
	\hline
	\textbf{Pre-condition} &
	\begin{itemize}
		\item Giao diện đăng nhập đã hiển thị.
		\item Kết nối internet ổn định.
	\end{itemize}
	\\
	\hline
	\textbf{Basic flow} &
	\begin{tabular}{|p{1cm}|p{7.5cm}|}
		\hline
		\textbf{STT} & \textbf{Sự kiện} \\
		\hline
		1 & Người dùng nhập email và mật khẩu vào form \\
		\hline
		2 & Người dùng nhấn nút "Log in" \\
		\hline
		3 & Hệ thống gửi thông tin đến server \\
		\hline
		4 & Server kiểm tra thông tin và phản hồi kết quả \\
		\hline
		5 & Client load giao diện home của ứng dụng cho người dùng sử dụng \\
		\hline
	\end{tabular}
	\\
	\hline
	\textbf{Alternate flow:} Đăng nhập cách khác & Nhấn để đăng nhập bằng Google
	\\
	\hline
	\textbf{Post-condition} & 
	\begin{itemize}
		\item Hệ thống khởi tạo phiên làm việc hợp lệ cho người dùng.
		\item Giao diện chính được hiển thị để bắt đầu sử dụng hệ thống.
	\end{itemize} \\
	\hline
	\textbf{Other} & Thông tin đăng nhập hợp lệ \\
	\hline
	\caption{Use Case: Login} \label{tab:usecase-login} \\
\end{longtable}

\subsection{Đăng xuất}
\begin{longtable}{|p{4.5cm}|p{10cm}|}
	\hline
	\textbf{Mã Use case} & UC-Logout \\
	\hline
	\textbf{Tên Use case} & Logout \\
	\hline
	\textbf{Tác nhân} & Người dùng \\
	\hline
	\textbf{Mô tả} & Người dùng đăng xuất khỏi hệ thống. \\
	\hline
	\textbf{Sự kiện kích hoạt} & Người dùng bấm vào nút "Log out" \\
	\hline
	\textbf{Pre-condition} &
	\begin{itemize}
		\item Người dùng đã đăng nhập thành công.
		\item Kết nối internet ổn định.
	\end{itemize}
	\\
	\hline
	\textbf{Basic flow} &
	\begin{tabular}{|p{1cm}|p{7.5cm}|}
		\hline
		\textbf{STT} & \textbf{Sự kiện} \\
		\hline
		1 & Người dùng ấn vào "Setting" \\
		\hline
		2 & Người dùng nhấn nút "Log out" \\
		\hline
		3 & Hệ thống gửi thông tin đến server \\
		\hline
		4 & Server kiểm tra thông tin và xóa token \\
		\hline
		5 & Client load giao diện bắt đầu \\
		\hline
	\end{tabular}
	\\
	\hline
	\textbf{Alternate flow:} & None
	\\
	\hline
	\textbf{Post-condition} & 
	\begin{itemize}
		\item Giao diện bắt đầu được hiển thị.
	\end{itemize} \\
	\hline
	\textbf{Other} & None \\
	\hline
	\caption{Use Case: Logout} \label{tab:usecase-logout} \\
\end{longtable}

\subsection{Tìm kiếm bài hát}
\begin{longtable}{|p{4.5cm}|p{10cm}|}
	\hline
	\textbf{Mã Use case} & UC-SeachingSong \\
	\hline
	\textbf{Tên Use case} & Seach songs \\
	\hline
	\textbf{Tác nhân} & Người dùng \\
	\hline
	\textbf{Mô tả} & Người dùng tìm kiếm bài hát. \\
	\hline
	\textbf{Sự kiện kích hoạt} & Người dùng nhập keyword vào ô search \\
	\hline
	\textbf{Pre-condition} &
	\begin{itemize}
		\item Người dùng đã đăng nhập thành công.
		\item Kết nối internet ổn định.
	\end{itemize}
	\\
	\hline
	\textbf{Basic flow} &
	\begin{tabular}{|p{1cm}|p{7.5cm}|}
		\hline
		\textbf{STT} & \textbf{Sự kiện} \\
		\hline
		1 & Người dùng ấn vào nút "Search" \\
		\hline
		2 & Người dùng nhập tên bài hát \\
		\hline
		3 & Hệ thống gửi tên bài hát đến server \\
		\hline
		4 & Server kiểm tra thông tin và trả về kết quả \\
		\hline
		5 & Client load các bài hát lên giao diện \\
		\hline
	\end{tabular}
	\\
	\hline
	\textbf{Alternate flow:} Tìm kiếm theo tác giả &  Người dùng nhập tên tác giả \\
	\hline
	\textbf{Post-condition} & 
	\begin{itemize}
		\item Các bài hát được hiển thị trên giao diện và người dùng có thể phát nhạc.
	\end{itemize} \\
	\hline
	\textbf{Other} & None \\
	\hline
	\caption{Use Case: SearchingSong} \label{tab:usecase-seahcsong} \\
\end{longtable}



